#!/usr/bin/env node
parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"commands-description.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CommandDescription={"--message":"Simple commit message when deploying module","--out-dir":"Parcel build out dir","--file":"Pass file path after this argument","--namespace":"How this module will be named ? Later when you install it you can use it as follow import { MyModule } from '@mynamespace'","--beat":"How many seconds the application should stay after deploy recomended 20 seconds so file will be distributed accross the network","--html":"Pass your html file this will override --message or 3-th argument message and you can put whole html","--webui":"Will spawn web ui with many settings, history, last deployed module etc. can be passed with --open-browser argument","--open-browser":"Will open browser for web user interface","--graphiql-playground":"Development purposes open graphiql-playground dev tools","--node-only":"Will just spawn node so you can use it for persistent data","--silent":"Will silent every program output log","--unminify":"Tell ParcelJS to not minify or uglify current deployed module","--browser":"Will tell ParcelJS to build current module for browser","--tsconfig":"Create tsconfig file if not exist","--verbose":"Better logging or you can use -v argument for simplicity","--default-ipfs-node":"Default ipfs node is GO but if you want you can use JS '--default-ipfs-node js'","--ipfs-api-gateway":"This is the address of the IPFS Gatway default: /ip4/127.0.0.1/tcp/8081","--ipfs-api-port":"This is the port of the IPFS Api default: /ip4/127.0.0.1/tcp/5002","--ipfs-swarms":"These are the swarms for the Ipfs daemon passing them with comma separated example: --ipfs-swarms /ip4/0.0.0.0/tcp/4001,/ip6/::/tcp/4001, etc...","--deployer-config-name":"This is default reactive.json filename you can change with other but in this moment is not tested very well","--graphiql":"Open GraphiQL dev screen","--open-browser-graphiql":"Open browser for development purposes with Graphiql Dev tools","--webui-server-watcher":"If this argument passed we can spawn our server watcher so we can manage syncronization with UI and passing data from the rxdi-deploy server","--webui-server-watcher-port":"Watcher port is the main status port for webui if changed webui will not work defaults: 8957","--graphiql-subscription-endpoint":"Graphiql Dev tool subscription endpoint","--graphiql-auth-token":"Authentication token for graphiql dev tools","--graphql-endpoint":"Endpoint for the Graphql webserver","--write-effects":"Development effects are for graphql webserver can be checked here for more info https://github.com/Stradivario/gapi","--graphql-server-only":"This argument will start also graphql web server so you can start making queries and interact with deployer only via API","--graphiql-endpoint":"Endpoint for Graphiql development tools","--graphql-api-port":"Development server api port is random, if not set --random-port will default to: 9300","--random-port":"This parameter will set random port to Graphql Server if for example you dont have the port avalable","--disable-package-collection":"Disable collecting dependencies from package.json","--collect-packages":"Collect dependencies from package.json and transfer it to reactive.json","--help":"This help suite :)","--server-push-interval":"Interval for server push service this is how fast the data will update by default is 7 seconds","--enable-full-folder-access":"Will give you reading and writing the whole file system so you can scan and build every folder and file (development only)"};
},{}],"commands.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./commands-description");function r(e){return e.reduce((e,r)=>(e[r]=r,e),Object.create(null))}exports.Commands=r(["--message","--out-dir","--file","--namespace","--beat","--html","--webui","--open-browser","--node-only","--silent","--unminify","--browser","--v","--tsconfig","--verbose","--default-ipfs-node","--deployer-config-name","--open-browser-graphiql","--webui-server-watcher","--webui-server-watcher-port","--random-port","--graphiql","--graphiql-subscription-endpoint","--graphiql-playground","--graphiql-auth-token","--graphiql-endpoint","--graphql-endpoint","--write-effects","--graphql-api-port","--disable-package-collection","--collect-packages","--server-push-interval","--help","--ipfs-api-gateway","--ipfs-api-port","--ipfs-swarms","--graphql-server-only","--enable-full-folder-access"]),exports.ExcludedFromHelpers=r(["--v"]),Object.keys(exports.Commands).map(r=>{if(Object.keys(exports.ExcludedFromHelpers).filter(e=>e===r).length)return;Object.keys(e.CommandDescription).filter(e=>e===r).length||(console.error(`\nMissing helper for command ${r} if you seen this message the developers don't do their job very well and this release is broken...\n        `),process.exit(0))});
},{"./commands-description":"commands-description.ts"}],"check-arguments.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./commands"),n=require("./commands-description"),t=(e,n,t=32)=>{const s=e.split(""),o=n.split(""),i=s.filter((e,n)=>e===o[n]).length/s.length*100;return i>t&&(console.log("Command similarity",i+"%"),e)},s=process.argv.slice(2),o=s.filter(e=>e.includes("--"));exports.checkArguments=(()=>{o.map(o=>{if(!Object.keys(n.CommandDescription).filter(e=>e===o).length&&s.length){const n=Object.keys(e.Commands).filter(e=>t(e.split("--")[1],o.split("--")[1])).toString();let s="";n.length&&(s=`maybe you mean '${n}'`),console.error(`\n            \nUnknown option '${o}' ${s}?\nMore options you can find passing --help argument\n            \n            `),process.exit(0)}})});
},{"./commands":"commands.ts","./commands-description":"commands-description.ts"}],"app/services/helpers/helpers.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.includes=(e=>process.argv.toString().includes(e)),exports.nextOrDefault=((e,r=!0,s=(e=>e))=>{if(process.argv.toString().includes(e)){const t=process.argv[process.argv.indexOf(e)+1];return t?t.includes("--")?r:s(t):r}return r});
},{}],"app/services/logger/logger.service.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,o){var c,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var n=e.length-1;n>=0;n--)(c=e[n])&&(s=(i<3?c(s):i>3?c(t,r,s):c(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("@rxdi/core"),r=require("rxjs");let o=class{constructor(){this.stdout=new r.BehaviorSubject("")}};o=e([t.Service()],o),exports.LoggerService=o;
},{}],"app/services/arguments/arguments.service.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,c){var l,o=arguments.length,n=o<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,r):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,c);else for(var s=e.length-1;s>=0;s--)(l=e[s])&&(n=(o<3?l(n):o>3?l(t,r,n):l(t,r))||n);return o>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("@rxdi/core"),r=require("../helpers/helpers");let c=class{nextOrDefault(e,t=null,c=(e=>e)){return r.nextOrDefault(e,t,c)}};c=e([t.Service()],c),exports.ArgumentsService=c;
},{"../helpers/helpers":"app/services/helpers/helpers.ts"}],"env.injection.tokens.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@rxdi/core");exports.__ROOT_FOLDER=new e.InjectionToken("root_folder"),exports.__NODE_MODULES=new e.InjectionToken("local_node_modules"),exports.__DEPLOYER_ARGUMENTS=new e.InjectionToken("rxdi-deployer-command-arguments"),exports.__PARCEL_BROWSER_BUILD=new e.InjectionToken("rxdi-deployer-parcel-is-browser-build"),exports.__PARCEL_MINIFY=new e.InjectionToken("rxdi-deployer-parcel-minify"),exports.__PARCEL_BUILD_OUT_DIR=new e.InjectionToken("rxdi-deployer-parcel-build-out-dir"),exports.__PARCEL_SETTINGS=new e.InjectionToken("rxdi-deployer-parcel-settings"),exports.__GENERATE_TS_CONFIG=new e.InjectionToken("rxdi-deployer-tsconfig-generate"),exports.__FILE_PATH=new e.InjectionToken("rxdi-deployer-file-path"),exports.__FILE_NAME=new e.InjectionToken("rxdi-deployer-file-name"),exports.__NAMESPACE=new e.InjectionToken("rxdi-deployer-namespace"),exports.__FOLDER=new e.InjectionToken("rxdi-deployer-folder"),exports.__FILE_EXTENSION=new e.InjectionToken("rxdi-deployer-file-extension"),exports.__IPFS_NODE_RESOLUTION_TIME=new e.InjectionToken("rxdi-deployer-node-resolution-time"),exports.__DEPLOYER_OUTPUT_CONFIG_NAME=new e.InjectionToken("rxdi-deployer-default-migration-package-name"),exports.__PROCESSING_TIME_INIT=new e.InjectionToken("rxdi-deployer-processin-time-init"),exports.__PROCESSING_TIME_FINISH=new e.InjectionToken("rxdi-deployer-processin-time-finish"),exports.__PROCESSING_TIME_END=new e.InjectionToken("rxdi-deployer-processin-time-end"),exports.__SETTINGS_DATABASE=new e.InjectionToken("rxdi-deployer-home-settings"),exports.__BUILD_HISTORY_DATABASE=new e.InjectionToken("rxdi-deployer-build-history-database"),exports.__PREVIWS_DATABASE=new e.InjectionToken("rxdi-deployer-previews-database"),exports.__NAMESPACE_DB=new e.InjectionToken("rxdi-deployer-namespace-database"),exports.__HOME_DIR=new e.InjectionToken("rxdi-deployer-home-directory"),exports.__COMMIT_MESSAGE=new e.InjectionToken("rxdi-deployer-commit-message"),exports.__CREATE_HTML_PAGE=new e.InjectionToken("rxdi-deployer-commit-message");class o{}exports.DagModel=o;class n{}exports.PreviousModel=n;
},{}],"app/services/tsconfig-generator/tsconfig-generator.service.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,n,t,r){var o,s=arguments.length,i=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,n,t,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(s<3?o(i):s>3?o(n,t,i):o(n,t))||i);return s>3&&i&&Object.defineProperty(n,t,i),i};Object.defineProperty(exports,"__esModule",{value:!0});const n=require("@rxdi/core");let t=class{getTsConfig(e){return`\n{\n    "compilerOptions": {\n        "declaration": true,\n        "module": "commonjs",\n        "target": "es6",\n        "baseUrl": "src",\n        "stripInternal": true,\n        "emitDecoratorMetadata": true,\n        "experimentalDecorators": true,\n        "moduleResolution": "node",\n        "outDir": ".",\n        "lib": [\n            "es2017",\n            "es2016",\n            "es2015",\n            "es6",\n            "dom",\n            "esnext.asynciterable"\n        ],\n        "skipLibCheck": true,\n        "typeRoots": [\n            "node_modules/@types"\n        ]\n    },\n    "include": [\n        "."\n    ],\n    "files": [\n        "${e}.ts"\n    ]\n}`}};t=e([n.Service()],t),exports.TsConfigGenratorService=t;
},{}],"app/services/file/file.service.ts":[function(require,module,exports) {
"use strict";var e,i,t=this&&this.__decorate||function(e,i,t,r){var o,n=arguments.length,c=n<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,i,t,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(c=(n<3?o(c):n>3?o(i,t,c):o(i,t))||c);return n>3&&c&&Object.defineProperty(i,t,c),c},r=this&&this.__metadata||function(e,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,i)},o=this&&this.__awaiter||function(e,i,t,r){return new(t||(t=Promise))(function(o,n){function c(e){try{s(r.next(e))}catch(i){n(i)}}function l(e){try{s(r.throw(e))}catch(i){n(i)}}function s(e){e.done?o(e.value):new t(function(i){i(e.value)}).then(c,l)}s((r=r.apply(e,i||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const n=require("@rxdi/core"),c=require("fs");let l=class{constructor(e,i){this.fileService=e,this.logger=i}ensureDir(e){return this.fileService.mkdirp(e)}readFile(e){return o(this,void 0,void 0,function*(){return yield this.readFilePromisify(e)})}writeFile(e,i){return o(this,void 0,void 0,function*(){return yield this.writeFilePromisify(e,i)})}createFolder(e){return o(this,void 0,void 0,function*(){return yield this.fileService.mkdirp(e).toPromise()})}fileWalker(e){return this.fileService.fileWalker(e)}readFilePromisify(e){return new Promise((i,t)=>{c.readFile(e,"utf8",(e,r)=>{e&&t(e),i(r)})})}readFilePromisifyFallback(e){return new Promise((i,t)=>o(this,void 0,void 0,function*(){c.readFile(e,"utf8",(r,n)=>r?(this.logger.error("Fallback missing reactive.json file will create one!"),this.writeFile(e,JSON.stringify({name:"",typings:"",module:"",message:"",previews:[]})).then(()=>o(this,void 0,void 0,function*(){return i(yield this.readFilePromisify(e))})).catch(e=>t(e))):i(n))}))}writeFilePromisify(e,i,t="utf-8"){return new Promise((r,o)=>{c.writeFile(e,i,{encoding:t},e=>{e&&o(e),r(!0)})})}readFileRaw(e){return new Promise((i,t)=>{c.readFile(e,(e,r)=>{e&&t(e),i(r)})})}};l=t([n.Service(),r("design:paramtypes",["function"==typeof(e=void 0!==n.FileService&&n.FileService)?e:Object,"function"==typeof(i=void 0!==n.BootstrapLogger&&n.BootstrapLogger)?i:Object])],l),exports.FileService=l;
},{}],"environment-setter.module.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,r,t,i){var o,a=arguments.length,s=a<3?r:null===i?i=Object.getOwnPropertyDescriptor(r,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,r,t,i);else for(var _=e.length-1;_>=0;_--)(o=e[_])&&(s=(a<3?o(s):a>3?o(r,t,s):o(r,t))||s);return a>3&&s&&Object.defineProperty(r,t,s),s},r=this&&this.__awaiter||function(e,r,t,i){return new(t||(t=Promise))(function(o,a){function s(e){try{n(i.next(e))}catch(r){a(r)}}function _(e){try{n(i.throw(e))}catch(r){a(r)}}function n(e){e.done?o(e.value):new t(function(r){r(e.value)}).then(s,_)}n((i=i.apply(e,r||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("@rxdi/core"),i=require("./app/services/arguments/arguments.service"),o=require("./env.injection.tokens"),a=require("./app/services/tsconfig-generator/tsconfig-generator.service"),s=require("./app/services/file/file.service"),_=require("os"),n=require("nedb"),d=require("./app/services/helpers/helpers"),c=require("fs");let u=class{};u=e([t.Module({services:[{provide:"isLockExists",deps:[s.FileService],lazy:!0,useFactory:e=>r(this,void 0,void 0,function*(){const r=`${_.homedir()}/.jsipfs/repo.lock`,t=`${_.homedir()}/.jsipfs/datastore/LOCK`;try{yield e.readFile(r),c.unlinkSync(r)}catch(i){}try{yield e.readFile(t),c.unlinkSync(t)}catch(i){}return!0})},{provide:o.__DEPLOYER_ARGUMENTS,useFactory:()=>process.argv.slice(2)},{provide:o.__NODE_MODULES,useValue:__dirname.replace("dist","")+"/node_modules"},{provide:o.__ROOT_FOLDER,useValue:__dirname.replace("dist","")},{provide:o.__HOME_DIR,useValue:_.homedir()},{provide:o.__COMMIT_MESSAGE,deps:[o.__DEPLOYER_ARGUMENTS],useFactory:e=>{const r=d.nextOrDefault("--message",!1);return r||(e[2]&&e[2].includes("--")?"":e[2]||"")}},{provide:o.__PARCEL_BROWSER_BUILD,useFactory:()=>d.includes("--browser")},{provide:o.__PARCEL_MINIFY,useFactory:()=>!d.includes("--unminify")},{provide:o.__PARCEL_BUILD_OUT_DIR,useFactory:()=>d.nextOrDefault("--out-dir","build")},{provide:o.__PARCEL_SETTINGS,useFactory:()=>({watch:!1,logLevel:3,detailedReport:!0})},{provide:o.__GENERATE_TS_CONFIG,useFactory:()=>d.includes("--tsconfig")},{provide:o.__FILE_PATH,deps:[o.__DEPLOYER_ARGUMENTS],useFactory:e=>d.includes("--file")?d.nextOrDefault("--file",""):e[0]&&e[0].includes("--")&&e[0]&&!e[0].match(/[^\\]*\.(\w+)$/)?"./index.ts":e[0]||"./index.ts"},{provide:o.__FILE_NAME,deps:[o.__FILE_PATH],useFactory:e=>e.split("/").pop()},{provide:o.__NAMESPACE,deps:[o.__DEPLOYER_ARGUMENTS],useFactory:e=>d.includes("--namespace")?d.nextOrDefault("--namespace","@rxdi"):e[1]&&e[1].includes("--")?"@rxdi":e[1]||"@rxdi"},{provide:o.__FOLDER,deps:[o.__FILE_PATH],useFactory:e=>e.substring(0,e.lastIndexOf("/"))},{provide:o.__FILE_EXTENSION,deps:[o.__FILE_PATH],useFactory:e=>e.match(/\.([0-9a-z]+)(?:[\?#]|$)/i)?e.match(/\.([0-9a-z]+)(?:[\?#]|$)/i)[0]:"ts"},{provide:o.__IPFS_NODE_RESOLUTION_TIME,useFactory:()=>d.nextOrDefault("--beat",20,Number)},{provide:o.__DEPLOYER_OUTPUT_CONFIG_NAME,useValue:d.nextOrDefault("--deployer-config-name","reactive.json")},{provide:o.__PROCESSING_TIME_INIT,useFactory:()=>Date.now()},{provide:o.__PROCESSING_TIME_FINISH,useFactory:()=>d.nextOrDefault("--deployer-config-name","reactive.json")},{provide:o.__PROCESSING_TIME_END,deps:[i.ArgumentsService],useFactory:()=>d.nextOrDefault("--deployer-config-name","reactive.json")},{provide:o.__CREATE_HTML_PAGE,deps:[i.ArgumentsService],useFactory:()=>d.nextOrDefault("--html","<h1>@rxdi decentralized module</h1>")},{provide:"init-ts-config-file",deps:[o.__GENERATE_TS_CONFIG,o.__FILE_NAME,o.__FOLDER,a.TsConfigGenratorService,s.FileService],lazy:!0,useFactory:(e,t,i,o,a)=>r(this,void 0,void 0,function*(){return e&&(yield a.writeFile(i+"/tsconfig.json",o.getTsConfig(t.replace(".ts","")))),e})},{provide:o.__SETTINGS_DATABASE,deps:[o.__HOME_DIR],lazy:!0,useFactory:e=>new Promise(r=>{const t=new n({filename:`${e}/.rxdi/settings`,autoload:!0,timestampData:!0});t.loadDatabase(e=>{if(e)throw new Error("Error loading database!");r(t)})})},{provide:o.__NAMESPACE_DB,deps:[o.__HOME_DIR],lazy:!0,useFactory:e=>new Promise(r=>{const t=new n({filename:`${e}/.rxdi/namespace`,autoload:!0,timestampData:!0});t.loadDatabase(e=>{if(e)throw new Error("Error loading database!");r(t)})})},{provide:o.__BUILD_HISTORY_DATABASE,deps:[o.__HOME_DIR],lazy:!0,useFactory:e=>new Promise(r=>{const t=new n({filename:`${e}/.rxdi/history`,autoload:!0,timestampData:!0});t.loadDatabase(e=>{if(e)throw new Error("Error loading database!");r(t)})})},{provide:o.__PREVIWS_DATABASE,deps:[o.__HOME_DIR],lazy:!0,useFactory:e=>new Promise(r=>{const t=new n({filename:`${e}/.rxdi/previews`,autoload:!0});t.loadDatabase(e=>{if(e)throw new Error("Error loading database!");r(t)})})}]})],u),exports.EnvironemntSetterModule=u;
},{"./app/services/arguments/arguments.service":"app/services/arguments/arguments.service.ts","./env.injection.tokens":"env.injection.tokens.ts","./app/services/tsconfig-generator/tsconfig-generator.service":"app/services/tsconfig-generator/tsconfig-generator.service.ts","./app/services/file/file.service":"app/services/file/file.service.ts","./app/services/helpers/helpers":"app/services/helpers/helpers.ts"}],"app/services/ipfs-file/ipfs-file.service.ts":[function(require,module,exports) {
"use strict";var e,t,i=this&&this.__decorate||function(e,t,i,r){var o,n=arguments.length,s=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(n<3?o(s):n>3?o(t,i,s):o(t,i))||s);return n>3&&s&&Object.defineProperty(t,i,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}},n=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))(function(o,n){function s(e){try{f(r.next(e))}catch(t){n(t)}}function a(e){try{f(r.throw(e))}catch(t){n(t)}}function f(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(s,a)}f((r=r.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const s=require("@rxdi/core"),a=require("stream"),f=require("@gapi/ipfs-daemon/ipfs-daemon-node-info"),p=require("@gapi/ipfs-daemon"),c=require("rxjs"),h=require("http"),u=require("https"),d=require("rxjs/operators");let l=class{constructor(e,t,i){this.ipfsDaemon=e,this.ipfsDaemonNodeInfo=t,this.logger=i,this.nodeInfo=this.ipfsDaemonNodeInfo.info,this.providers={infura:"https://ipfs.infura.io/ipfs/",cloudflare:"https://cloudflare-ipfs.com/ipfs/",ipfsOriginal:"https://ipfs.io/ipfs/",thisNode:`http://${this.ipfsDaemonNodeInfo.info.gatewayHost}:${this.ipfsDaemonNodeInfo.info.gatewayPort}/ipfs/`}}addFile(e){return n(this,void 0,void 0,function*(){const t=new a.Readable;t.push(e),t.push(null);const i=yield this.ipfsDaemon.api.add([{content:t}]);try{this.ping(i[0].hash).subscribe()}catch(r){}return this.logger.log(`Cloudflare: ${this.providers.cloudflare}${i[0].hash}`),i})}ping(e){return this.httpObservable(`${this.providers.thisNode}${e}`).pipe(d.switchMap(()=>c.combineLatest(this.httpObservable(`${this.providers.infura}${e}`),this.httpObservable(`${this.providers.cloudflare}${e}`),this.httpObservable(`${this.providers.ipfsOriginal}${e}`))))}httpObservable(e){return c.Observable.create(t=>{e.includes("https")?u.get(e,e=>t.next(e)):h.get(e,e=>t.next(e))})}wait(e){return n(this,void 0,void 0,function*(){return yield new Promise((t,i)=>this.ping(e[0].hash).subscribe(e=>t(e),e=>i(e)))})}addPackage(e){return n(this,void 0,void 0,function*(){return yield this.addFile(JSON.stringify(e,null,4))})}catIpfsFile(e){return n(this,void 0,void 0,function*(){return yield this.ipfsDaemon.api.cat(e)})}getIpfsFile(e){return n(this,void 0,void 0,function*(){return yield this.ipfsDaemon.api.get(e)})}addRawFile(e){return n(this,void 0,void 0,function*(){const t=yield this.ipfsDaemon.api.add([{content:e}]);return this.ping(t[0].hash).subscribe(),t})}};l=i([s.Service(),o(0,s.Inject(p.IPFS_DAEMON)),r("design:paramtypes",[Object,"function"==typeof(e=void 0!==f.IpfsDaemonInfoService&&f.IpfsDaemonInfoService)?e:Object,"function"==typeof(t=void 0!==s.BootstrapLogger&&s.BootstrapLogger)?t:Object])],l),exports.FileIpfsService=l;
},{}],"app/services/parcel-bundler/parcel-bundler.service.ts":[function(require,module,exports) {
"use strict";var e,t,n,i,r=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,c=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,i);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}},u=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function c(e){try{s(i.next(e))}catch(t){o(t)}}function u(e){try{s(i.throw(e))}catch(t){o(t)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(c,u)}s((i=i.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const s=require("@rxdi/core"),_=require("parcel-bundler"),l=require("../../../env.injection.tokens");let d=class{constructor(e,t,n,i){this.isBrowserBuild=e,this.isBuildMinfied=t,this.buildOutDir=n,this.settings=i}prepareBundler(e,t=null,n){return u(this,void 0,void 0,function*(){return new Promise((i,r)=>{const o=Object.assign({target:this.isBrowserBuild?"browser":"node",minify:this.isBuildMinfied,outFile:n,outDir:t||this.buildOutDir},this.settings),c=new _(e,o);let u=null;c.on("bundled",e=>{u=e}),c.on("buildEnd",()=>{process.argv.toString().includes("--silent")?console.log=(()=>null):process.stdout.write(`Parcel Build finished! Bundle source: ${u.name}\n`),u=null,setTimeout(()=>i(),1e3)}),c.on("buildError",e=>r(e)),c.bundle()})})}};d=r([s.Service(),c(0,s.Inject(l.__PARCEL_BROWSER_BUILD)),c(1,s.Inject(l.__PARCEL_MINIFY)),c(2,s.Inject(l.__PARCEL_BUILD_OUT_DIR)),c(3,s.Inject(l.__PARCEL_SETTINGS)),o("design:paramtypes",["function"==typeof(e=void 0!==l.__PARCEL_BROWSER_BUILD&&l.__PARCEL_BROWSER_BUILD)?e:Object,"function"==typeof(t=void 0!==l.__PARCEL_BROWSER_BUILD&&l.__PARCEL_BROWSER_BUILD)?t:Object,"function"==typeof(n=void 0!==l.__PARCEL_BUILD_OUT_DIR&&l.__PARCEL_BUILD_OUT_DIR)?n:Object,"function"==typeof(i=void 0!==l.__PARCEL_SETTINGS&&l.__PARCEL_SETTINGS)?i:Object])],d),exports.ParcelBundlerService=d;
},{"../../../env.injection.tokens":"env.injection.tokens.ts"}],"app/services/file/file-user.service.ts":[function(require,module,exports) {
"use strict";var e,t,i=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,c=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(c=(o<3?n(c):o>3?n(t,i,c):n(t,i))||c);return o>3&&c&&Object.defineProperty(t,i,c),c},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},n=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function c(e){try{f(r.next(e))}catch(t){o(t)}}function s(e){try{f(r.throw(e))}catch(t){o(t)}}function f(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(c,s)}f((r=r.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const o=require("@rxdi/core"),c=require("./file.service"),s=require("../../../env.injection.tokens");let f=class{constructor(e){this.fileService=e}writeFile(e,t,i){return n(this,void 0,void 0,function*(){return yield new Promise((r,o)=>n(this,void 0,void 0,function*(){this.fileService.ensureDir(`${this.parcelBuildDir}/${i}`).subscribe(()=>n(this,void 0,void 0,function*(){yield this.fileService.writeFile(`${this.parcelBuildDir}/${i}/${t}`,e),r(!0)}),e=>o(e))}))})}writeDag(e,t){return n(this,void 0,void 0,function*(){return yield new Promise((i,r)=>n(this,void 0,void 0,function*(){yield this.fileService.writeFile(e,t),i(!0)}))})}};i([o.Inject(s.__PARCEL_BUILD_OUT_DIR),r("design:type","function"==typeof(e=void 0!==s.__PARCEL_BUILD_OUT_DIR&&s.__PARCEL_BUILD_OUT_DIR)?e:Object)],f.prototype,"parcelBuildDir",void 0),f=i([o.Service(),r("design:paramtypes",["function"==typeof(t=void 0!==c.FileService&&c.FileService)?t:Object])],f),exports.FileUserService=f;
},{"./file.service":"app/services/file/file.service.ts","../../../env.injection.tokens":"env.injection.tokens.ts"}],"app/services/dts-generator/dts-generator.service.ts":[function(require,module,exports) {
"use strict";var e,t=this&&this.__decorate||function(e,t,i,r){var o,n=arguments.length,s=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(s=(n<3?o(s):n>3?o(t,i,s):o(t,i))||s);return n>3&&s&&Object.defineProperty(t,i,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}},o=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))(function(o,n){function s(e){try{l(r.next(e))}catch(t){n(t)}}function c(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(s,c)}l((r=r.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const n=require("@rxdi/core"),s=require("child_process"),c=require("../../../env.injection.tokens");let l=class{constructor(e,t){this.logger=e,this.node_modules=t}validateEntries(e,t,i){if(!t)throw new Error("Missing project path");if(!e)throw new Error("Missing project namespace");if(!i)throw new Error("Missing project outPath")}mergeTypings(e,t,i){return o(this,void 0,void 0,function*(){return this.validateEntries(e,t,i),new Promise((r,o)=>{this.child&&(this.child.stdout.removeAllListeners("data"),this.child.stderr.removeAllListeners("data"),this.child.removeAllListeners("exit"),this.child.kill()),process.env=Object.assign(process.env,{}),this.logger.log("Typescript merging definitions started in child process...\n"),this.child=s.spawn(`${this.node_modules}/.bin/rxdi-merge`,["--name",e,"--project",t,"--out",i]),this.child.stdout.on("data",e=>{process.argv.toString().includes("--silent")?console.log=(()=>null):process.stdout.write(e)}),this.child.stderr.on("data",e=>{e.toString().includes("Unable to resolve configuration")&&this.logger.log("If you want rxdi-deploy to create tsconfig.json for you pass parameter --tsconfig"),o(process.stdout.write(e))}),this.child.on("exit",e=>{this.child.kill(),this.child=null,this.logger.log(`Child process exited with code ${e}\n`),r(!0)})})})}};l=t([n.Service(),r(1,n.Inject(c.__NODE_MODULES)),i("design:paramtypes",["function"==typeof(e=void 0!==n.BootstrapLogger&&n.BootstrapLogger)?e:Object,String])],l),exports.TypescriptDefinitionGeneratorService=l;
},{"../../../env.injection.tokens":"env.injection.tokens.ts"}],"app/status/status-injection.tokens.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@rxdi/core");class t{constructor(){this.status="SUCCESS",this.message=""}}class s{constructor(){this.file=new t,this.typings=new t,this.module=new t}}exports.FILE_DEPLOYMENT_STATUS_INTERFACE=s,exports.START=new e.InjectionToken("compilation-started"),exports.FILE_DEPLOYMENT_STATUS=new e.InjectionToken("files-deploy-ment");
},{}],"app/services/table-service/table-service.ts":[function(require,module,exports) {
"use strict";var e,t,r=this&&this.__decorate||function(e,t,r,a){var o,n=arguments.length,s=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,a);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(n<3?o(s):n>3?o(t,r,s):o(t,r))||s);return n>3&&s&&Object.defineProperty(t,r,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});const o=require("@rxdi/core"),n=require("../../status/status-injection.tokens"),s=require("../ipfs-file/ipfs-file.service");var l=require("terminal-table");let i=class{constructor(e){this.fileIpfsService=e}createGenericTableStatus(e){let t,r;return"WARNING"===e&&(t="⚠",r="yellow"),"FAILED"===e&&(t="✘",r="red"),"SUCCESS"===e&&(t="✔",r="green"),{Icon:t,Color:r}}createTable(e,t,r){const a="https://cloudflare-ipfs.com/ipfs/";let o=this.$deploymentStatus.getValue().file,n=this.$deploymentStatus.getValue().typings,s=this.$deploymentStatus.getValue().module;const i=this.createGenericTableStatus(o.status),c=this.createGenericTableStatus(n.status),u=this.createGenericTableStatus(s.status);let d=["","Status","File Type","Size","Gateway"],g=[4,"6%","6%","8%","78%"],h=[i.Icon,o.status,"Bundle",`${e[0].size} bytes`,`${a}${e[0].hash}`],p=[c.Icon,n.status,"Typings",`${t[0].size} bytes`,`${a}${t[0].hash}`],S=[u.Icon,s.status,"Module",`${r[0].size} bytes`,`${a}${r[0].hash}`];"SUCCESS"===o.status&&"SUCCESS"===n.status&&"SUCCESS"===s.status||(d.push("Errors"),g=[4,"6%","6%","8%","40%","38%"]),"SUCCESS"!==o.status&&h.push(o.message),"SUCCESS"!==n.status&&p.push(n.message),"SUCCESS"!==s.status&&S.push(s.message);const f=new l({borderStyle:2,horizontalLine:!0,width:g,rightPadding:0,leftPadding:1});return f.push(d),f.push(h),f.push(p),f.push(S),f.attrRange({row:[0,1]},{color:"green",bg:"black"}),f.attrRange({column:[0,1]},{color:"green",bg:"black"}),f.attrRange({column:[0,2],row:[0,4]},{color:"green",bg:"black"}),f.attrRange({column:[0,1],row:[0,2]},{color:"green"}),f.attrRange({column:[0,2],row:[0,2]},{color:i.Color}),f.attrRange({column:[0,2],row:[2,3]},{color:c.Color}),f.attrRange({column:[0,2],row:[3,4]},{color:u.Color}),f.attrRange({row:[1],column:[1]},{}),"SUCCESS"===o.status&&"SUCCESS"===n.status&&"SUCCESS"===s.status||(f.attrRange({column:[5,6]},{color:"red"}),f.attrRange({column:[5,6],row:[5,6]},{color:"red"})),f}previewsVersions(e){var t=new l({borderStyle:2,horizontalLine:!0,width:["50%","50%"],rightPadding:0,leftPadding:1});return t.push(["Previews versions","Gateway"]),e.forEach(e=>{t.push([e,`https://cloudflare-ipfs.com/ipfs/${e}`])}),t.attrRange({row:[0,1]},{align:"center",color:"green",bg:"black"}),t.attrRange({row:[1],column:[1]},{leftPadding:5}),t}endInstallCommand(e){const t=new l({borderStyle:2,horizontalLine:!0,width:["50%"],rightPadding:0,leftPadding:1});return t.push(["Install command"]),t.push([`rxdi i ${e}`]),t.attrRange({row:[0,1]},{align:"center",color:"green",bg:"black"}),t.attrRange({row:[1],column:[1]},{leftPadding:5}),t}previewsNext(e){var t=new l({borderStyle:2,horizontalLine:!0,width:["50%","50%"],rightPadding:0,leftPadding:1});t.push(["Previews version","Next version"]);let r=!1,a=[],o=[];return e.forEach(e=>{r?(r=!1,o.push(e)):(a.push(e),r=!0)}),a.forEach((e,r)=>{t.push([e,o[r]])}),t.attrRange({row:[0,1]},{align:"center",color:"green",bg:"black"}),t.attrRange({row:[1],column:[1]},{leftPadding:5}),t}getHistoryTable(e){var t=new l({borderStyle:2,horizontalLine:!0,width:[3,"50%","50%"],rightPadding:0,leftPadding:1});return t.push(["","Date","Hash"]),console.log(e),e.forEach(e=>{t.push(["",`${e.createdAt}`,`rxdi-deploy --find ${e.hash}`])}),t.attrRange({row:[0,1]},{align:"center",color:"green",bg:"black"}),t.attrRange({row:[1],column:[1]},{leftPadding:5}),t}fileUploadStatus(e){const t=new l({borderStyle:2,horizontalLine:!0,width:["100%"],rightPadding:0,leftPadding:1});return t.push(["File upload status"]),t.push([`File size: ${e[0].size} bytes`]),t.push([`IPFS address: ${this.fileIpfsService.providers.cloudflare}${e[0].hash}`]),t.attrRange({row:[0,1]},{align:"center",color:"green",bg:"black"}),t.attrRange({row:[1],column:[1]},{leftPadding:5}),t}};r([o.Inject(n.FILE_DEPLOYMENT_STATUS),a("design:type","function"==typeof(e=void 0!==n.FILE_DEPLOYMENT_STATUS&&n.FILE_DEPLOYMENT_STATUS)?e:Object)],i.prototype,"$deploymentStatus",void 0),i=r([o.Service(),a("design:paramtypes",["function"==typeof(t=void 0!==s.FileIpfsService&&s.FileIpfsService)?t:Object])],i),exports.TableService=i;
},{"../../status/status-injection.tokens":"app/status/status-injection.tokens.ts","../ipfs-file/ipfs-file.service":"app/services/ipfs-file/ipfs-file.service.ts"}],"app/status/status.service.ts":[function(require,module,exports) {
"use strict";var e,t=this&&this.__decorate||function(e,t,o,r){var i,n=arguments.length,s=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(n<3?i(s):n>3?i(t,o,s):i(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("@rxdi/core"),i=require("./status-injection.tokens");let n=class{getBuildStatus(){return this.$deploymentStatus.getValue()}setBuildStatus(e){this.$deploymentStatus.next(Object.assign({},this.$deploymentStatus.getValue(),e))}};t([r.Inject(i.FILE_DEPLOYMENT_STATUS),o("design:type","function"==typeof(e=void 0!==i.FILE_DEPLOYMENT_STATUS&&i.FILE_DEPLOYMENT_STATUS)?e:Object)],n.prototype,"$deploymentStatus",void 0),n=t([r.Service()],n),exports.StatusService=n;
},{"./status-injection.tokens":"app/status/status-injection.tokens.ts"}],"app/status/status.module.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,s,r){var u,c=arguments.length,o=c<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,r);else for(var i=e.length-1;i>=0;i--)(u=e[i])&&(o=(c<3?u(o):c>3?u(t,s,o):u(t,s))||o);return c>3&&o&&Object.defineProperty(t,s,o),o};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("@rxdi/core"),s=require("rxjs"),r=require("./status-injection.tokens"),u=require("./status.service");let c=class{};c=e([t.Module({services:[u.StatusService,{provide:r.START,useValue:new s.BehaviorSubject(!0)},{provide:r.FILE_DEPLOYMENT_STATUS,useValue:new s.BehaviorSubject({file:{status:"SUCCESS",message:"success"},typings:{status:"SUCCESS",message:"success"},module:{status:"SUCCESS",message:"success"}})}]})],c),exports.StatusModule=c;
},{"./status-injection.tokens":"app/status/status-injection.tokens.ts","./status.service":"app/status/status.service.ts"}],"app/services/build-history/build-history.service.ts":[function(require,module,exports) {
"use strict";var e,t=this&&this.__decorate||function(e,t,r,i){var a,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(n<3?a(o):n>3?a(t,r,o):a(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});const i=require("@rxdi/core"),a=require("rxjs"),n=require("../../../env.injection.tokens");let o=class{insert(e){return new a.Observable(t=>{this.buildHistoryDatabase.insert(e,(e,r)=>{if(e)throw new Error("Unable to insert to database");t.next(r)})})}find(e){return new a.Observable(t=>{this.buildHistoryDatabase.find(e,(e,r)=>{e&&t.error(e),t.next(r)})})}findAll(e=0,t=100,r={createdAt:-1},i={}){return new Promise((a,n)=>{this.buildHistoryDatabase.find(i).sort(r).skip(e).limit(t).exec((e,t)=>{e&&n(e),a(t.map(e=>(e.createdAt=new Date(e.createdAt).valueOf(),e)).sort((e,t)=>t.createdAt-e.createdAt).map(e=>(e.createdAt=new Date(e.createdAt),e)))})})}};t([i.Inject(n.__BUILD_HISTORY_DATABASE),r("design:type","function"==typeof(e=void 0!==n.__BUILD_HISTORY_DATABASE&&n.__BUILD_HISTORY_DATABASE)?e:Object)],o.prototype,"buildHistoryDatabase",void 0),o=t([i.Service()],o),exports.BuildHistoryService=o;
},{"../../../env.injection.tokens":"env.injection.tokens.ts"}],"app/services/error-reason/error-reason.service.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,r,t,o){var i,c=arguments.length,n=c<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,r,t,o);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(n=(c<3?i(n):c>3?i(r,t,n):i(r,t))||n);return c>3&&n&&Object.defineProperty(r,t,n),n};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("@rxdi/core");let t=class{moduleIntegrityError(e,r){console.log(`Module is with the same integrity like in the previws version ${e}`),console.log(`To check this version write down following command rxdi-deploy --find ${r}`)}};t=e([r.Service()],t),exports.ErrorReasonService=t;
},{}],"app/services/previous/previous.service.ts":[function(require,module,exports) {
"use strict";var e,t=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,r,a):n(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});const i=require("@rxdi/core"),n=require("rxjs"),o=require("../../../env.injection.tokens");let a=class{insert(e){return new n.Observable(t=>{this.previwsDatabase.insert(e,(e,r)=>{if(e)throw new Error("Unable to insert to database");t.next(r)})})}find(e){return new n.Observable(t=>{this.previwsDatabase.find(e,(e,r)=>{e&&t.error(e),t.next(r)})})}};t([i.Inject(o.__PREVIWS_DATABASE),r("design:type","function"==typeof(e=void 0!==o.__PREVIWS_DATABASE&&o.__PREVIWS_DATABASE)?e:Object)],a.prototype,"previwsDatabase",void 0),a=t([i.Service()],a),exports.PreviousService=a;
},{"../../../env.injection.tokens":"env.injection.tokens.ts"}],"app/services/package-json/package-json.service.ts":[function(require,module,exports) {
"use strict";var e,t,i=this&&this.__decorate||function(e,t,i,n){var r,c=arguments.length,o=c<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(c<3?r(o):c>3?r(t,i,o):r(t,i))||o);return c>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}},c=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(r,c){function o(e){try{u(n.next(e))}catch(t){c(t)}}function s(e){try{u(n.throw(e))}catch(t){c(t)}}function u(e){e.done?r(e.value):new i(function(t){t(e.value)}).then(o,s)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const o=require("../file/file.service"),s=require("@rxdi/core"),u=require("../../../env.injection.tokens"),f=require("../helpers/helpers");let a=class{constructor(e,t){this.fileService=e,this.deployerOutputConfigName=t}OnInit(){f.includes("--collect-packages")?this.defaultOutputConfig="package.json":this.defaultOutputConfig=this.deployerOutputConfigName}prepareDependencies(e){return c(this,void 0,void 0,function*(){const t=yield this.read(e);return t.dependencies?Object.keys(t.dependencies).map(e=>({name:e,version:t.dependencies[e]})):[]})}readModifyWrite(e={},t){return c(this,void 0,void 0,function*(){let i=yield this.read(t);return i=Object.assign({},e,i),yield this.write(i,t)})}read(e){return c(this,void 0,void 0,function*(){return JSON.parse(yield this.fileService.readFile(e||`${process.cwd()}/${this.defaultOutputConfig}`))})}write(e,t){return c(this,void 0,void 0,function*(){return yield this.fileService.writeFile(t||`${process.cwd()}/${this.defaultOutputConfig}`,JSON.stringify(e))})}};a=i([s.Service(),r(1,s.Inject(u.__DEPLOYER_OUTPUT_CONFIG_NAME)),n("design:paramtypes",["function"==typeof(e=void 0!==o.FileService&&o.FileService)?e:Object,"function"==typeof(t=void 0!==u.__DEPLOYER_OUTPUT_CONFIG_NAME&&u.__DEPLOYER_OUTPUT_CONFIG_NAME)?t:Object])],a),exports.PackageJsonService=a;
},{"../file/file.service":"app/services/file/file.service.ts","../../../env.injection.tokens":"env.injection.tokens.ts","../helpers/helpers":"app/services/helpers/helpers.ts"}],"app/server/namespace/services/namespace.service.ts":[function(require,module,exports) {
"use strict";var e,t=this&&this.__decorate||function(e,t,n,i){var r,c=arguments.length,o=c<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(c<3?r(o):c>3?r(t,n,o):r(t,n))||o);return c>3&&o&&Object.defineProperty(t,n,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,c){function o(e){try{s(i.next(e))}catch(t){c(t)}}function a(e){try{s(i.throw(e))}catch(t){c(t)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(o,a)}s((i=i.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("@rxdi/core"),c=require("../../../../env.injection.tokens");let o=class{getNamespace(e){return new Promise((t,n)=>{this.namespace.find({name:e}).exec((e,i)=>{e&&n(e),t(i)})})}getNamespaceById(e){return new Promise((t,n)=>{this.namespace.findOne({_id:e},(e,i)=>{e&&n(e),console.log(i),t(i)})})}searchForDuplicates(e){return new Promise((t,n)=>{this.namespace.findOne({name:e},(e,i)=>{e&&n(e),t(i)})})}insert(e){return i(this,void 0,void 0,function*(){return yield new Promise((t,n)=>{this.namespace.insert(e,(e,i)=>{e&&n(e),t(i)})})})}listNamespaces(e=0,t=100,n={createdAt:-1}){return new Promise((i,r)=>{this.namespace.find({}).sort(n).skip(e).limit(t).exec((e,t)=>{e&&r(e),i(t)})})}};t([r.Inject(c.__NAMESPACE_DB),n("design:type","function"==typeof(e=void 0!==c.__NAMESPACE_DB&&c.__NAMESPACE_DB)?e:Object)],o.prototype,"namespace",void 0),o=t([r.Service()],o),exports.NamespaceService=o;
},{"../../../../env.injection.tokens":"env.injection.tokens.ts"}],"app/services/time/time.service.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,c){var a,o=arguments.length,n=o<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,r):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,c);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(n=(o<3?a(n):o>3?a(t,r,n):a(t,r))||n);return o>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("@rxdi/core");let r=class{calculateTime(e){const t=new Date(e);return{day:this.getDay(t),month:this.getDay(t),year:this.getDay(t)}}getDay(e){return e.getUTCDate()}getMonth(e){return e.getUTCDate()}getYear(e){return e.getUTCFullYear()}};r=e([t.Service()],r),exports.TimeService=r;
},{}],"app/services/html-template-builder/html-template-builder.service.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,c){var o,l=arguments.length,i=l<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,r):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,c);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(i=(l<3?o(i):l>3?o(t,r,i):o(t,r))||i);return l>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("@rxdi/core");let r=class{};r=e([t.Service()],r),exports.HtmlTemplateBuilder=r;
},{}],"app/services/index.ts":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./file/file-user.service")),e(require("./file/file.service")),e(require("./ipfs-file/ipfs-file.service")),e(require("./parcel-bundler/parcel-bundler.service")),e(require("./arguments/arguments.service")),e(require("./dts-generator/dts-generator.service")),e(require("./tsconfig-generator/tsconfig-generator.service")),e(require("./table-service/table-service")),e(require("./build-history/build-history.service")),e(require("./previous/previous.service")),e(require("./error-reason/error-reason.service")),e(require("./time/time.service")),e(require("./package-json/package-json.service")),e(require("./html-template-builder/html-template-builder.service")),e(require("./helpers/helpers")),e(require("./logger/logger.service"));
},{"./file/file-user.service":"app/services/file/file-user.service.ts","./file/file.service":"app/services/file/file.service.ts","./ipfs-file/ipfs-file.service":"app/services/ipfs-file/ipfs-file.service.ts","./parcel-bundler/parcel-bundler.service":"app/services/parcel-bundler/parcel-bundler.service.ts","./arguments/arguments.service":"app/services/arguments/arguments.service.ts","./dts-generator/dts-generator.service":"app/services/dts-generator/dts-generator.service.ts","./tsconfig-generator/tsconfig-generator.service":"app/services/tsconfig-generator/tsconfig-generator.service.ts","./table-service/table-service":"app/services/table-service/table-service.ts","./build-history/build-history.service":"app/services/build-history/build-history.service.ts","./previous/previous.service":"app/services/previous/previous.service.ts","./error-reason/error-reason.service":"app/services/error-reason/error-reason.service.ts","./time/time.service":"app/services/time/time.service.ts","./package-json/package-json.service":"app/services/package-json/package-json.service.ts","./html-template-builder/html-template-builder.service":"app/services/html-template-builder/html-template-builder.service.ts","./helpers/helpers":"app/services/helpers/helpers.ts","./logger/logger.service":"app/services/logger/logger.service.ts"}],"app/server/file/services/file.service.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},t=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))(function(s,n){function o(e){try{u(r.next(e))}catch(t){n(t)}}function l(e){try{u(r.throw(e))}catch(t){n(t)}}function u(e){e.done?s(e.value):new i(function(t){t(e.value)}).then(o,l)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const i=require("@rxdi/core"),r=require("rxjs/operators"),s=require("fs"),n=require("../../../services"),o=require("path"),l=require("rxjs");let u=class{constructor(){this.units=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],this.results=[]}wholeReadDirRecursive(e="."){return t(this,void 0,void 0,function*(){const i=yield this.readDir(e),r=e,s=this;return(yield Promise.all(i.map(e=>t(this,void 0,void 0,function*(){const t=o.resolve(r,e),i=yield this.statAsync(t);if(i&&i.isDirectory()){if(e.includes("node_modules"))return null;yield s.wholeReadDirRecursive.bind(this)(t)}else this.results=[...this.results,t]})))).filter(e=>!!e)})}readCurrentDirFlat(e="."){return t(this,void 0,void 0,function*(){return(yield this.readDir(e)).map(t=>o.resolve(e,t)).filter(e=>!!e)})}listFolder(e){return t(this,void 0,void 0,function*(){return yield new Promise((t,i)=>{l.from(this.readCurrentDirFlat(e)).pipe(r.switchMap(e=>this.map(e))).subscribe(e=>t(e),e=>i(e))})})}readDir(e,i=200){return t(this,void 0,void 0,function*(){return yield new Promise((t,r)=>{s.readdir(e,(e,r)=>{if(e)t([]);else{let e=0;t(r.map(t=>i>++e?t:null).filter(e=>!!e))}})})})}map(e){return t(this,void 0,void 0,function*(){let i=0;return(yield Promise.all(e.map(e=>t(this,void 0,void 0,function*(){i++;const t={path:e,directory:null,file:null,name:null,status:null},r=yield this.statAsync(e);return!r.isDirectory||r&&r.prototype===String?null:(r.isDirectory()?t.directory=!0:t.file=!0,t.name=e.split("/").pop(),t.path=(t=>e.replace(process.cwd(),t))("."),n.includes("--enable-full-folder-access")&&(t.path=e),t.status=r,t.status.size=this.niceBytes(r.size),100===i?null:t)})))).filter(e=>!!e)})}niceBytes(e){let t=0,i=parseInt(e,10)||0;for(;i>=1024&&++t;)i/=1024;return i.toFixed(i>=10||t<1?0:1)+" "+this.units[t]}statAsync(e){return t(this,void 0,void 0,function*(){return yield new Promise((t,i)=>{s.stat(e,(e,i)=>{e&&t(e),t(i)})})})}};u=e([i.Service()],u),exports.FileService=u;
},{"../../../services":"app/services/index.ts"}],"app/plugins/compile/compile.plugin.ts":[function(require,module,exports) {
"use strict";var e,i,t,s,r,o,n,l,c,a,d,p,h,u,f,g,v,y,S,m,_,b,O=this&&this.__decorate||function(e,i,t,s){var r,o=arguments.length,n=o<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,i,t,s);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(n=(o<3?r(n):o>3?r(i,t,n):r(i,t))||n);return o>3&&n&&Object.defineProperty(i,t,n),n},E=this&&this.__metadata||function(e,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,i)},w=this&&this.__awaiter||function(e,i,t,s){return new(t||(t=Promise))(function(r,o){function n(e){try{c(s.next(e))}catch(i){o(i)}}function l(e){try{c(s.throw(e))}catch(i){o(i)}}function c(e){e.done?r(e.value):new t(function(i){i(e.value)}).then(n,l)}c((s=s.apply(e,i||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const I=require("../../../env.injection.tokens"),F=require("@rxdi/core"),M=require("rxjs/operators"),N=require("rxjs"),T=require("../../services/file/file-user.service"),j=require("../../services/parcel-bundler/parcel-bundler.service"),P=require("../../services/ipfs-file/ipfs-file.service"),A=require("../../services/file/file.service"),$=require("../../services/dts-generator/dts-generator.service"),R=require("../../services/tsconfig-generator/tsconfig-generator.service"),C=require("../../services/table-service/table-service"),x=require("../../services/build-history/build-history.service"),B=require("../../services/previous/previous.service"),D=require("../../services/error-reason/error-reason.service"),k=require("../../status/status.service"),q=require("../../services/package-json/package-json.service"),G=require("../../services/helpers/helpers"),L=require("../../server/namespace/services/namespace.service"),U=require("../../server/file/services/file.service");let J=class{constructor(e,i,t,s,r,o,n,l,c,a,d,p,h,u,f){this.parcelBundler=e,this.logger=i,this.ipfsFile=t,this.fileService=s,this.fileUserService=r,this.typingsGenerator=o,this.tsConfigGenerator=n,this.tableService=l,this.buildHistoryService=c,this.previousService=a,this.namespaceService=d,this.errorReasonService=p,this.statusService=h,this.packageJsonService=u,this.internalFileService=f,this.fileNotDeployed="",this.initIpfsModule=[{size:0,hash:this.fileNotDeployed,path:this.fileNotDeployed,content:this.fileNotDeployed}]}register(){return w(this,void 0,void 0,function*(){return G.includes("--webui")||G.includes("--node-only")?yield Promise.resolve():this.isJavascriptCompilation()?yield this.compile():yield new Promise(e=>{this.writeOtherFile(`${this.folder}${this.fileName}`).pipe(M.tap(e=>this.logSuccess(e)),M.switchMapTo(N.interval(1e3)),M.take(this.resolutionTime),M.map(e=>this.resolutionTime-1-e)).subscribe(i=>{i||(e(!0),process.exit(0))},e=>{this.logger.error(e),process.exit(1)})})})}isJavascriptCompilation(){return!![".ts",".js",".tsx"].filter(e=>e===this.extension).length}compile(){return w(this,void 0,void 0,function*(){return this.completeBuildAndAddToIpfs(this.folder,this.fileName,this.commitMessage,this.namespace,this.outputConfigName).pipe(M.tap(e=>this.logSuccess(e)),M.switchMapTo(N.interval(1e3)),M.take(this.resolutionTime),M.map(e=>this.resolutionTime-1-e)).subscribe(e=>{e||process.exit(0)},e=>{this.logger.error(e),process.exit(1)})})}parcelBuild(e,i=null,t){return this.parcelBundler.prepareBundler(e,i,t)}createCommitMessage(e=""){return w(this,void 0,void 0,function*(){if(G.includes("--html")){let e;const t=G.nextOrDefault("--html","./index.html");try{e=yield this.fileService.readFileRaw(t)}catch(i){console.log(`\nError loading file ${t}\n                `),process.exit(0)}return yield this.ipfsFile.addRawFile(e)}return!e||e.includes("--")||e.includes("-")?yield Promise.resolve(this.initIpfsModule):yield this.ipfsFile.addFile(e)})}completeBuildAndAddToIpfs(e,i,t,s,r,o="./build"){let n,l,c,a,d=this.initIpfsModule,p=this.initIpfsModule,h=this.initIpfsModule;return this.logger.log("Bundling Started!\n"),N.from(this.parcelBuild(e+"/"+i,o,`${i.split(".")[0]}.js`)).pipe(M.tap(()=>{this.logger.log("Bundling finished!\n"),this.logger.log(`Adding commit message ${t}...\n`)}),M.switchMap(()=>w(this,void 0,void 0,function*(){return this.createCommitMessage(t)})),M.tap(e=>{p=e,this.logger.log("Commit message added...\n")}),M.switchMap(()=>this.fileService.readFile(`${o}/${i.split(".")[0]}.js`)),M.tap(()=>{this.logger.log(`Reading bundle ${o}/${i.split(".")[0]}.js finished!\n`)}),M.switchMap(e=>this.ipfsFile.addFile(e)),M.tap(e=>{n=e,this.logger.log(`Bundle added to ipfs ${o}/${i.split(".")[0]}.js\n`),this.logger.log("Typescript definitions merge started!\n")}),M.switchMap(()=>N.from(this.typingsGenerator.mergeTypings(s,e,`${o}/index.d.ts`))),M.tap(()=>this.logger.log("Typescript definitions merge finished! Reading file...\n")),M.switchMap(()=>this.fileService.readFile(`${o}/index.d.ts`)),M.tap(()=>this.logger.log("Typescript definitions read finished! Adding to IPFS...\n")),M.switchMap(e=>e?this.ipfsFile.addFile(e):(this.statusService.setBuildStatus({typings:{status:"WARNING",message:"Missing typescript definition.Typings will not be uploaded!"}}),Promise.resolve(this.initIpfsModule))),M.tap(e=>{(d=e)[0].hash&&this.logger.log("Typescript definitions added to IPFS! Adding module configuration...\n")}),M.switchMap(()=>this.fileService.readFilePromisifyFallback(`${e}/${r}`)),M.switchMap(i=>w(this,void 0,void 0,function*(){try{a=JSON.parse(i)}catch(o){throw new Error(`Cannot parse ${r} from root directory!`)}c={name:s,module:n[0].hash,createdAt:new Date},d[0].hash&&(c.typings=d[0].hash),p[0].hash&&(c.message=p[0].hash),h[0].hash&&(c.metadata=h[0].hash),c.previous=[...a.previous||[]];let t={ipfs:[]};if(yield this.internalFileService.statAsync(`${e}/${r}`)){this.logger.log(`Reactive file present ${r} package dependencies will be taken from it`);try{t=JSON.parse(yield this.fileService.readFile(`${e}/${r}`))}catch(o){throw new Error(`Cannot parce reactive file at ${e}/${r}`)}t.dependencies&&(c.dependencies=t.dependencies);const i=[];t.ipfs&&t.ipfs.length&&(t.ipfs.forEach(e=>e.dependencies.forEach(e=>i.push(e))),i.length&&(c.dependencies=i))}if(this.logger.log(`Current module before deploy ${JSON.stringify(c)}`),G.includes("--collect-packages")){const i=yield this.packageJsonService.prepareDependencies(`${e}/package.json`);i.length&&(c.packages=i)}return l=yield this.ipfsFile.addFile(JSON.stringify(c,null,2)),c.previous.length>=20&&c.previous.shift(),c.previous=[...c.previous,l[0].hash],t.ipfs&&(c.ipfs=t.ipfs),yield this.fileUserService.writeDag(`${e}/${r}`,JSON.stringify(c,null,2)),l})),M.tap(()=>this.logger.log("Module configuration added to ipfs!\n")),M.switchMap(()=>w(this,void 0,void 0,function*(){let e=yield this.namespaceService.searchForDuplicates(s);return e||(e=yield this.namespaceService.insert({name:s})),e})),M.switchMap(e=>N.combineLatest([this.buildHistoryService.insert({status:{file:this.statusService.getBuildStatus().file,typings:this.statusService.getBuildStatus().typings,module:this.statusService.getBuildStatus().module},hash:l[0].hash,name:s,typings:d[0].hash,module:n[0].hash,metadata:h[0].hash,message:p[0].hash,namespaceId:e._id}),this.previousService.insert({name:s,hash:l[0].hash})])),M.map(()=>({file:n,typings:d,module:l})),M.tap(()=>w(this,void 0,void 0,function*(){this.logger.log("Module saved to persistant history!"),l||this.fileNotAddedToIpfs(l),console.log(""+this.tableService.previewsVersions(c.previous)),console.log(""+this.tableService.previewsNext(c.previous)),console.log(""+this.tableService.endInstallCommand(l[0].hash)),console.log(""+this.tableService.createTable(n,d,l));const e=e=>c.previous[c.previous.length-e];yield this.showError(e(2),e(1))})))}fileNotAddedToIpfs(e){console.log(`File not added to ipfs for ${JSON.stringify(e)}`),console.log(`More info can be found executing command: rxdi-deploy --find ${e[0].hash}`)}integrityCheck(e,i,t){const s="Integrity is same like in the previews version!";console.log(e.module,i[0].hash),e.module===i[0].hash&&(this.logger.log("\n        !! Warning !!\n        Module is with the same integrity and will not be uploaded again!\n        You need to make change to the module so it will be with different integrity!\n            "),this.statusService.setBuildStatus({file:{status:"WARNING",message:s},module:{status:"WARNING",message:s}})),e.typings===t[0].hash&&(this.logger.log("\n        !! Warning !!\n        Typings are with the same integrity and will not be uploaded again!\n        You need to make change to the module so it will be with different integrity!\n            "),this.statusService.setBuildStatus({typings:{status:"WARNING",message:s}}))}showError(e,i){return w(this,void 0,void 0,function*(){return yield new Promise(t=>{Object.keys(this.statusService.getBuildStatus()).filter(e=>"SUCCESS"!==this.statusService.getBuildStatus()[e].status).length&&this.errorReasonService.moduleIntegrityError(e,i),setTimeout(()=>{t()},1e3)})})}writeOtherFile(e){return N.from(this.fileService.readFileRaw(e)).pipe(M.switchMap(e=>this.ipfsFile.addRawFile(e)),M.tap(e=>{console.log(""+this.tableService.fileUploadStatus(e))}))}logSuccess(e){console.log(`Deploy finish ipfs node will shutdown in: ${this.resolutionTime} seconds`)}completeBuildAndAddToIpfs2(e="@gapi/core"){let i;return N.from(this.fileUserService.writeFile("\nimport { Service } from '@rxdi/core';\n\n@Service()\nexport class Pesho {\n    constructor() {\n        console.log('THIS IS PESHO SERVICE');\n    }\n}\n        \n        ","index.ts",e)).pipe(M.switchMap(()=>N.from(this.fileUserService.writeFile(this.tsConfigGenerator.getTsConfig("index"),"tsconfig.json",e))),M.switchMap(()=>N.from(this.parcelBundler.prepareBundler(`./build/${e}/index.ts`))),M.switchMap(()=>this.fileService.readFile("./build/index.js")),M.switchMap(e=>this.ipfsFile.addFile(e)),M.tap(e=>i=e),M.switchMap(()=>N.from(this.typingsGenerator.mergeTypings(e,`./build/${e}`,"./build/index.d.ts"))),M.switchMap(()=>N.of(i)))}};O([F.Inject(I.__FILE_NAME),E("design:type","function"==typeof(e=void 0!==I.__FILE_NAME&&I.__FILE_NAME)?e:Object)],J.prototype,"fileName",void 0),O([F.Inject(I.__FOLDER),E("design:type","function"==typeof(i=void 0!==I.__FOLDER&&I.__FOLDER)?i:Object)],J.prototype,"folder",void 0),O([F.Inject(I.__IPFS_NODE_RESOLUTION_TIME),E("design:type","function"==typeof(t=void 0!==I.__IPFS_NODE_RESOLUTION_TIME&&I.__IPFS_NODE_RESOLUTION_TIME)?t:Object)],J.prototype,"resolutionTime",void 0),O([F.Inject(I.__DEPLOYER_OUTPUT_CONFIG_NAME),E("design:type","function"==typeof(s=void 0!==I.__DEPLOYER_OUTPUT_CONFIG_NAME&&I.__DEPLOYER_OUTPUT_CONFIG_NAME)?s:Object)],J.prototype,"outputConfigName",void 0),O([F.Inject(I.__NAMESPACE),E("design:type","function"==typeof(r=void 0!==I.__NAMESPACE&&I.__NAMESPACE)?r:Object)],J.prototype,"namespace",void 0),O([F.Inject(I.__COMMIT_MESSAGE),E("design:type","function"==typeof(o=void 0!==I.__COMMIT_MESSAGE&&I.__COMMIT_MESSAGE)?o:Object)],J.prototype,"commitMessage",void 0),O([F.Inject(I.__FILE_EXTENSION),E("design:type","function"==typeof(n=void 0!==I.__FILE_EXTENSION&&I.__FILE_EXTENSION)?n:Object)],J.prototype,"extension",void 0),J=O([F.Plugin(),E("design:paramtypes",["function"==typeof(l=void 0!==j.ParcelBundlerService&&j.ParcelBundlerService)?l:Object,"function"==typeof(c=void 0!==F.BootstrapLogger&&F.BootstrapLogger)?c:Object,"function"==typeof(a=void 0!==P.FileIpfsService&&P.FileIpfsService)?a:Object,"function"==typeof(d=void 0!==A.FileService&&A.FileService)?d:Object,"function"==typeof(p=void 0!==T.FileUserService&&T.FileUserService)?p:Object,"function"==typeof(h=void 0!==$.TypescriptDefinitionGeneratorService&&$.TypescriptDefinitionGeneratorService)?h:Object,"function"==typeof(u=void 0!==R.TsConfigGenratorService&&R.TsConfigGenratorService)?u:Object,"function"==typeof(f=void 0!==C.TableService&&C.TableService)?f:Object,"function"==typeof(g=void 0!==x.BuildHistoryService&&x.BuildHistoryService)?g:Object,"function"==typeof(v=void 0!==B.PreviousService&&B.PreviousService)?v:Object,"function"==typeof(y=void 0!==L.NamespaceService&&L.NamespaceService)?y:Object,"function"==typeof(S=void 0!==D.ErrorReasonService&&D.ErrorReasonService)?S:Object,"function"==typeof(m=void 0!==k.StatusService&&k.StatusService)?m:Object,"function"==typeof(_=void 0!==q.PackageJsonService&&q.PackageJsonService)?_:Object,"function"==typeof(b=void 0!==U.FileService&&U.FileService)?b:Object])],J),exports.CompilePlugin=J;
},{"../../../env.injection.tokens":"env.injection.tokens.ts","../../services/file/file-user.service":"app/services/file/file-user.service.ts","../../services/parcel-bundler/parcel-bundler.service":"app/services/parcel-bundler/parcel-bundler.service.ts","../../services/ipfs-file/ipfs-file.service":"app/services/ipfs-file/ipfs-file.service.ts","../../services/file/file.service":"app/services/file/file.service.ts","../../services/dts-generator/dts-generator.service":"app/services/dts-generator/dts-generator.service.ts","../../services/tsconfig-generator/tsconfig-generator.service":"app/services/tsconfig-generator/tsconfig-generator.service.ts","../../services/table-service/table-service":"app/services/table-service/table-service.ts","../../services/build-history/build-history.service":"app/services/build-history/build-history.service.ts","../../services/previous/previous.service":"app/services/previous/previous.service.ts","../../services/error-reason/error-reason.service":"app/services/error-reason/error-reason.service.ts","../../status/status.service":"app/status/status.service.ts","../../services/package-json/package-json.service":"app/services/package-json/package-json.service.ts","../../services/helpers/helpers":"app/services/helpers/helpers.ts","../../server/namespace/services/namespace.service":"app/server/namespace/services/namespace.service.ts","../../server/file/services/file.service":"app/server/file/services/file.service.ts"}],"app/server/services/webui.service.ts":[function(require,module,exports) {
"use strict";var e,t,r=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,c=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(c=(o<3?n(c):o>3?n(t,r,c):n(t,r))||c);return o>3&&c&&Object.defineProperty(t,r,c),c},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}},o=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function c(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){e.done?n(e.value):new r(function(t){t(e.value)}).then(c,s)}u((i=i.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const c=require("@rxdi/hapi"),s=require("@rxdi/core"),u=require("hapi"),a=require("../../../env.injection.tokens"),f=require("../../services");let h=class{constructor(e,t){this.server=e,this.root_folder=t}OnInit(){f.includes("--webui")&&this.register()}register(){return o(this,void 0,void 0,function*(){this.server.route({method:"GET",path:"/webui/{param*}",handler:{directory:{path:`${this.root_folder}/webui`,listing:!0,index:["index.html"]}}})})}};h=r([s.Service(),n(0,s.Inject(c.HAPI_SERVER)),n(1,s.Inject(a.__ROOT_FOLDER)),i("design:paramtypes",["function"==typeof(e=void 0!==u.Server&&u.Server)?e:Object,"function"==typeof(t=void 0!==a.__ROOT_FOLDER&&a.__ROOT_FOLDER)?t:Object])],h),exports.WebUiService=h;
},{"../../../env.injection.tokens":"env.injection.tokens.ts","../../services":"app/services/index.ts"}],"app/server/services/server-push.service.ts":[function(require,module,exports) {
"use strict";var e,t,r,i,n=this&&this.__decorate||function(e,t,r,i){var n,s=arguments.length,c=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,i);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(c=(s<3?n(c):s>3?n(t,r,c):n(t,r))||c);return s>3&&c&&Object.defineProperty(t,r,c),c},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}},o=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function o(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){e.done?n(e.value):new r(function(t){t(e.value)}).then(c,o)}a((i=i.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const a=require("@rxdi/core"),u=require("http"),h=require("hapi"),d=require("@rxdi/hapi"),f=require("rxjs"),v=require("rxjs/operators"),l=require("../../services");let p=class{constructor(e,t,r,i){this.server=e,this.exitHandler=t,this.afterStarterService=r,this.openService=i,this.sendToClient=new f.Subject,this.sendTime=new f.Subject,this.clientConnected=new f.Subject,this.exitHandler.errorHandler.subscribe(e=>o(this,void 0,void 0,function*(){return yield this.stopServerWatcher()}));const n=l.nextOrDefault("--server-push-interval",7e3,e=>Number(1e3*e));f.timer(0,n).pipe(v.tap(()=>this.sendTime.next(!0))).subscribe(),this.afterStarterService.appStarted.pipe(v.switchMapTo(this.waitXSeconds(5)),v.take(1),v.filter(()=>!this.connected),v.filter(()=>l.includes("--open-browser")),v.tap(()=>this.openService.openPage(`http://${this.server.info.address}:${this.server.info.port}/webui`))).subscribe()}waitXSeconds(e){return f.Observable.create(t=>{const r=setTimeout(()=>t.next(!0),1e3*e);return()=>clearTimeout(r)})}OnInit(){this.register()}register(){return o(this,void 0,void 0,function*(){(l.includes("--webui-server-watcher")||l.includes("--webui"))&&this.createServerWatcher()})}stopServerWatcher(){return o(this,void 0,void 0,function*(){return yield new Promise(e=>this.serverWatcher.close(()=>e()))})}createServerWatcher(){this.serverWatcher=u.createServer(this.OnRequest.bind(this)),this.serverWatcher.listen(l.nextOrDefault("--webui-server-watcher-port",8957))}OnRequest(e,t){return"/status"===e.url?(this.connected||(this.clientConnected.next(!0),t.write("data: "+JSON.stringify({response:{init:!0}})+"\n\n")),this.connected=!0,t.writeHead(200,{"Content-Type":"text/event-stream","Access-Control-Allow-Origin":"*","Cache-Control":"no-cache",Connection:"keep-alive"}),this.sendToClient.subscribe(e=>t.write("data: "+JSON.stringify(e)+"\n\n")),this.sendTime.subscribe(e=>t.write("data: "+JSON.stringify({time:(new Date).toLocaleTimeString()})+"\n\n")),this.sendTime.subscribe(e=>t.write("data: "+JSON.stringify({config:{graphql:{},hapi:this.server.info}})+"\n\n")),void e.on("end",()=>{this.connected=!1,e.destroy()})):(t.statusCode=400,t.end())}};p=n([a.Service(),c(0,a.Inject(d.HAPI_SERVER)),s("design:paramtypes",["function"==typeof(e=void 0!==h.Server&&h.Server)?e:Object,"function"==typeof(t=void 0!==a.ExitHandlerService&&a.ExitHandlerService)?t:Object,"function"==typeof(r=void 0!==a.AfterStarterService&&a.AfterStarterService)?r:Object,"function"==typeof(i=void 0!==d.OpenService&&d.OpenService)?i:Object])],p),exports.ServerPushService=p;
},{"../../services":"app/services/index.ts"}],"app/server/user/types/user.type.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("graphql");exports.UserType=new e.GraphQLObjectType({name:"UserType",fields:{message:{type:e.GraphQLString}}});
},{}],"app/server/user/user-queries.controller.ts":[function(require,module,exports) {
"use strict";var e,t=this&&this.__decorate||function(e,t,r,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,s);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(n,i){function o(e){try{u(s.next(e))}catch(t){i(t)}}function c(e){try{u(s.throw(e))}catch(t){i(t)}}function u(e){e.done?n(e.value):new r(function(t){t(e.value)}).then(o,c)}u((s=s.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const n=require("@rxdi/core"),i=require("@gapi/core"),o=require("graphql"),c=require("./types/user.type");let u=class{constructor(e){this.pubsub=e}findUser(e,{message:t}){return s(this,void 0,void 0,function*(){return{message:t}})}subscribeToUserMessagesBasic({message:e}){return{message:e}}};t([i.Type(c.UserType),i.Query({message:{type:o.GraphQLString}}),r("design:type",Function),r("design:paramtypes",[Object,Object]),r("design:returntype",Promise)],u.prototype,"findUser",null),t([i.Type(c.UserType),i.Subscribe(e=>e.pubsub.asyncIterator("CREATE_SIGNAL_BASIC")),i.Subscription(),r("design:type",Function),r("design:paramtypes",[Object]),r("design:returntype",void 0)],u.prototype,"subscribeToUserMessagesBasic",null),u=t([n.Controller(),r("design:paramtypes",["function"==typeof(e=void 0!==i.PubSubService&&i.PubSubService)?e:Object])],u),exports.UserQueriesController=u;
},{"./types/user.type":"app/server/user/types/user.type.ts"}],"app/server/build/types/built-status.type.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("graphql");exports.BuildStatus=new e.GraphQLObjectType({name:"BuildStatus",fields:{status:{type:e.GraphQLString},message:{type:e.GraphQLString}}}),exports.BuildStatusType=new e.GraphQLObjectType({name:"BuildStatusType",fields:{file:{type:exports.BuildStatus},typings:{type:exports.BuildStatus},module:{type:exports.BuildStatus}}});
},{}],"app/server/history/types/history.type.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("graphql"),e=require("../../build/types/built-status.type");exports.HistoryType=new t.GraphQLObjectType({name:"HistoryType",fields:{_id:{type:t.GraphQLString},name:{type:t.GraphQLString},typings:{type:t.GraphQLString},module:{type:t.GraphQLString},metadata:{type:t.GraphQLString},message:{type:t.GraphQLString},hash:{type:t.GraphQLString},status:{type:e.BuildStatusType},namespaceId:{type:t.GraphQLString},createdAt:{type:t.GraphQLString},updatedAt:{type:t.GraphQLString}}});
},{"../../build/types/built-status.type":"app/server/build/types/built-status.type.ts"}],"app/server/history/history-subscription.controller.ts":[function(require,module,exports) {
"use strict";var e,t=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,s=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(n<3?i(s):n>3?i(t,r,s):i(t,r))||s);return n>3&&s&&Object.defineProperty(t,r,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});const o=require("@gapi/core"),i=require("./types/history.type");let n=class{constructor(e){this.pubsub=e}listenForNewBuilds(e){return{payload:e}}};t([o.Type(i.HistoryType),o.Subscribe(e=>e.pubsub.asyncIterator("LISTEN_FOR_BUILDS")),o.Subscription(),r("design:type",Function),r("design:paramtypes",[Object]),r("design:returntype",void 0)],n.prototype,"listenForNewBuilds",null),n=t([o.Controller(),r("design:paramtypes",["function"==typeof(e=void 0!==o.PubSubService&&o.PubSubService)?e:Object])],n),exports.HistorySubscriptionController=n;
},{"./types/history.type":"app/server/history/types/history.type.ts"}],"app/server/history/history.module.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,o){var c,l=arguments.length,i=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var s=e.length-1;s>=0;s--)(c=e[s])&&(i=(l<3?c(i):l>3?c(t,r,i):c(t,r))||i);return l>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("@rxdi/core"),r=require("./history-subscription.controller");let o=class{};o=e([t.Module({controllers:[r.HistorySubscriptionController]})],o),exports.HistoryModule=o;
},{"./history-subscription.controller":"app/server/history/history-subscription.controller.ts"}],"app/server/services/compile.service.ts":[function(require,module,exports) {
"use strict";var e,t=this&&this.__decorate||function(e,t,i,o){var c,r=arguments.length,l=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,o);else for(var n=e.length-1;n>=0;n--)(c=e[n])&&(l=(r<3?c(l):r>3?c(t,i,l):c(t,i))||l);return r>3&&l&&Object.defineProperty(t,i,l),l},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});const o=require("@rxdi/core"),c=require("../../plugins/compile/compile.plugin");let r=class{constructor(e){this.compilePlugin=e}buildFile(e="./packages/",t="index.ts",i="bla bla",o="@pesho",c){return this.compilePlugin.completeBuildAndAddToIpfs(e,t,i,o,"reactive.json",c)}};r=t([o.Service(),i("design:paramtypes",["function"==typeof(e=void 0!==c.CompilePlugin&&c.CompilePlugin)?e:Object])],r),exports.CompileService=r;
},{"../../plugins/compile/compile.plugin":"app/plugins/compile/compile.plugin.ts"}],"app/server/namespace/types/namespace.type.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i.throw(e))}catch(t){o(t)}}function c(e){e.done?n(e.value):new r(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("graphql"),r=require("../../history/types/history.type"),i=require("@rxdi/core"),n=require("../../../services");exports.NamespaceType=new t.GraphQLObjectType({name:"Namespacetype",fields:{_id:{type:t.GraphQLString},name:{type:t.GraphQLString},builds:{type:new t.GraphQLList(r.HistoryType),resolve:t=>e(this,void 0,void 0,function*(){const e=i.Container.get(n.BuildHistoryService);return yield e.findAll(0,100,null,{namespaceId:t._id})})}}});
},{"../../history/types/history.type":"app/server/history/types/history.type.ts","../../../services":"app/services/index.ts"}],"app/server/namespace/types/namespace-list.type.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("graphql"),p=require("./namespace.type");exports.NamespaceListType=new e.GraphQLObjectType({name:"NamespaceListType",fields:{count:{type:e.GraphQLInt},rows:{type:new e.GraphQLList(p.NamespaceType)}}});
},{"./namespace.type":"app/server/namespace/types/namespace.type.ts"}],"app/server/namespace/namespace.controller.ts":[function(require,module,exports) {
"use strict";var e,t,n=this&&this.__decorate||function(e,t,n,r){var i,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function s(e){try{p(r.next(e))}catch(t){a(t)}}function c(e){try{p(r.throw(e))}catch(t){a(t)}}function p(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,c)}p((r=r.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const a=require("@gapi/core"),s=require("./types/namespace.type"),c=require("./services/namespace.service"),p=require("./types/namespace-list.type");let o=class{constructor(e){this.namespaceService=e}getNamespace(e,{id:t}){return this.namespaceService.getNamespaceById(t)}insertNamespace(e,{name:t}){return i(this,void 0,void 0,function*(){if(yield this.namespaceService.searchForDuplicates(t))throw new Error("Namespace already exists!");return yield this.namespaceService.insert({name:t})})}listNamespaces(e,{skip:t,limit:n}){return i(this,void 0,void 0,function*(){const e=yield this.namespaceService.listNamespaces(t,n);return{count:e.length,rows:e}})}};n([a.Type(s.NamespaceType),a.Query({id:{type:a.GraphQLString}}),r("design:type",Function),r("design:paramtypes",[Object,Object]),r("design:returntype",void 0)],o.prototype,"getNamespace",null),n([a.Type(s.NamespaceType),a.Mutation({name:{type:a.GraphQLString}}),r("design:type",Function),r("design:paramtypes",[Object,Object]),r("design:returntype",Promise)],o.prototype,"insertNamespace",null),n([a.Type(p.NamespaceListType),a.Query({skip:{type:a.GraphQLInt},limit:{type:a.GraphQLInt}}),r("design:type",Function),r("design:paramtypes",[Object,Object]),r("design:returntype","function"==typeof(e="undefined"!=typeof Promise&&Promise)?e:Object)],o.prototype,"listNamespaces",null),o=n([a.Controller(),r("design:paramtypes",["function"==typeof(t=void 0!==c.NamespaceService&&c.NamespaceService)?t:Object])],o),exports.NamespaceController=o;
},{"./types/namespace.type":"app/server/namespace/types/namespace.type.ts","./services/namespace.service":"app/server/namespace/services/namespace.service.ts","./types/namespace-list.type":"app/server/namespace/types/namespace-list.type.ts"}],"app/server/namespace/namespace.module.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,r,t,c){var o,s=arguments.length,l=s<3?r:null===c?c=Object.getOwnPropertyDescriptor(r,t):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,r,t,c);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(l=(s<3?o(l):s>3?o(r,t,l):o(r,t))||l);return s>3&&l&&Object.defineProperty(r,t,l),l};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("@rxdi/core"),t=require("./namespace.controller"),c=require("./services/namespace.service");let o=class{};o=e([r.Module({controllers:[t.NamespaceController],services:[c.NamespaceService]})],o),exports.NamespaceModule=o;
},{"./namespace.controller":"app/server/namespace/namespace.controller.ts","./services/namespace.service":"app/server/namespace/services/namespace.service.ts"}],"app/server/build/types/build.type.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("graphql");exports.BuildType=new e.GraphQLObjectType({name:"BuildType",fields:{status:{type:e.GraphQLString}}});
},{}],"app/server/history/types/history-list.type.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("graphql"),t=require("./history.type");exports.HistoryListType=new e.GraphQLObjectType({name:"HistoryListType",fields:{count:{type:e.GraphQLInt},rows:{type:new e.GraphQLList(t.HistoryType)}}});
},{"./history.type":"app/server/history/types/history.type.ts"}],"app/server/build/types/process.type.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@gapi/core");exports.ProcessStdOutType=new e.GraphQLObjectType({name:"ProcessStdOutType",fields:{stdout:{type:e.GraphQLString}}});
},{}],"app/server/build/build.controller.ts":[function(require,module,exports) {
"use strict";var e,t,i,r,n,o,s,u=this&&this.__decorate||function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var u=e.length-1;u>=0;u--)(n=e[u])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function u(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(s,u)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const l=require("@gapi/core"),a=require("./types/build.type"),y=require("../services/compile.service"),d=require("../../services"),f=require("../history/types/history-list.type"),b=require("./types/built-status.type"),g=require("./types/process.type"),h=require("fs"),S=require("util");let v=class{constructor(e,t,i,r,n,o){this.compileService=e,this.buildHistoryService=t,this.pubsub=i,this.fileService=r,this.tsGenerator=n,this.loggerService=o}triggerBuild(e,{folder:t,file:i,message:r,namespace:n,buildFolder:o}){return p(this,void 0,void 0,function*(){return new Promise((e,s)=>p(this,void 0,void 0,function*(){yield this.fileService.writeFile(t+"/tsconfig.json",this.tsGenerator.getTsConfig(i.replace(".ts","")));const u=h.createWriteStream(`${t}/${i}.log`,{flags:"w"}),c=this.loggerService.stdout.subscribe(e=>{u.write(S.format(e)+"\n"),this.pubsub.publish("CREATE_SIGNAL_BASIC",{message:S.format(e)})});let p;const l=()=>{c.unsubscribe(),u.close(),p.unsubscribe()};p=this.compileService.buildFile(t,i,r,n,o).subscribe(()=>{e({status:"Finish"}),l()},e=>{l(),s(e||"Build failed")})}))})}getBuildHistory(e,{skip:t,limit:i,where:r}){return p(this,void 0,void 0,function*(){const e=yield this.buildHistoryService.findAll(t,i,null,r);return{count:e.length,rows:e}})}buildStatus(e){return{payload:e}}processStdOut(e){return{payload:e}}};u([l.Type(a.BuildType),l.Mutation({folder:{type:new l.GraphQLNonNull(l.GraphQLString)},file:{type:new l.GraphQLNonNull(l.GraphQLString)},message:{type:new l.GraphQLNonNull(l.GraphQLString)},namespace:{type:new l.GraphQLNonNull(l.GraphQLString)},buildFolder:{type:l.GraphQLString}}),c("design:type",Function),c("design:paramtypes",[Object,Object]),c("design:returntype",Promise)],v.prototype,"triggerBuild",null),u([l.Type(f.HistoryListType),l.Query({skip:{type:l.GraphQLInt},limit:{type:l.GraphQLInt},where:{type:new l.GraphQLInputObjectType({name:"BuildWhereType",fields:{namespaceId:{type:l.GraphQLString},name:{type:l.GraphQLString}}})}}),c("design:type",Function),c("design:paramtypes",[Object,Object]),c("design:returntype","function"==typeof(e="undefined"!=typeof Promise&&Promise)?e:Object)],v.prototype,"getBuildHistory",null),u([l.Type(b.BuildStatusType),l.Subscribe(e=>e.pubsub.asyncIterator("LISTEN_FOR_BUILDS")),l.Subscription(),c("design:type",Function),c("design:paramtypes",[Object]),c("design:returntype",void 0)],v.prototype,"buildStatus",null),u([l.Type(g.ProcessStdOutType),l.Subscribe(e=>e.pubsub.asyncIterator("PROCESS_STDOUT")),l.Subscription(),c("design:type",Function),c("design:paramtypes",[Object]),c("design:returntype",void 0)],v.prototype,"processStdOut",null),v=u([l.Controller(),c("design:paramtypes",["function"==typeof(t=void 0!==y.CompileService&&y.CompileService)?t:Object,"function"==typeof(i=void 0!==d.BuildHistoryService&&d.BuildHistoryService)?i:Object,"function"==typeof(r=void 0!==l.PubSubService&&l.PubSubService)?r:Object,"function"==typeof(n=void 0!==d.FileService&&d.FileService)?n:Object,"function"==typeof(o=void 0!==d.TsConfigGenratorService&&d.TsConfigGenratorService)?o:Object,"function"==typeof(s=void 0!==d.LoggerService&&d.LoggerService)?s:Object])],v),exports.BuildController=v;
},{"./types/build.type":"app/server/build/types/build.type.ts","../services/compile.service":"app/server/services/compile.service.ts","../../services":"app/services/index.ts","../history/types/history-list.type":"app/server/history/types/history-list.type.ts","./types/built-status.type":"app/server/build/types/built-status.type.ts","./types/process.type":"app/server/build/types/process.type.ts"}],"app/server/build/build.module.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,o){var l,c=arguments.length,i=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var n=e.length-1;n>=0;n--)(l=e[n])&&(i=(c<3?l(i):c>3?l(t,r,i):l(t,r))||i);return c>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("@rxdi/core"),r=require("./build.controller");let o=class{};o=e([t.Module({controllers:[r.BuildController]})],o),exports.BuildModule=o;
},{"./build.controller":"app/server/build/build.controller.ts"}],"app/server/file/types/file-status.type.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("@gapi/core");exports.FileStatusType=new t.GraphQLObjectType({name:"FileStatusType",fields:{size:{type:t.GraphQLString},birthtime:{type:t.GraphQLString},ctime:{type:t.GraphQLString},mtime:{type:t.GraphQLString},atime:{type:t.GraphQLString},birthtimeMs:{type:t.GraphQLString},ctimeMs:{type:t.GraphQLString},mtimeMs:{type:t.GraphQLString},atimeMs:{type:t.GraphQLString},blocks:{type:t.GraphQLInt},ino:{type:t.GraphQLInt},blksize:{type:t.GraphQLInt},rdev:{type:t.GraphQLInt},gid:{type:t.GraphQLInt},uid:{type:t.GraphQLInt},nlink:{type:t.GraphQLInt},mode:{type:t.GraphQLInt},dev:{type:t.GraphQLInt}}});
},{}],"app/server/file/types/folder-structure.type.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("graphql"),t=require("./file-status.type");exports.FolderStructureType=new e.GraphQLObjectType({name:"FolderStructureType",fields:{path:{type:e.GraphQLString},directory:{type:e.GraphQLBoolean},file:{type:e.GraphQLBoolean},name:{type:e.GraphQLString},status:{type:t.FileStatusType}}});
},{"./file-status.type":"app/server/file/types/file-status.type.ts"}],"app/server/file/types/file.type.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("graphql"),r=require("./folder-structure.type");exports.FileType=new e.GraphQLObjectType({name:"FileType",fields:{paths:{type:new e.GraphQLList(r.FolderStructureType)}}});
},{"./folder-structure.type":"app/server/file/types/folder-structure.type.ts"}],"app/server/file/types/file-raw.type.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("graphql");exports.FileRawType=new e.GraphQLObjectType({name:"FileRawType",fields:{package:{type:e.GraphQLString},file:{type:e.GraphQLString}}});
},{}],"app/server/file/file.controller.ts":[function(require,module,exports) {
"use strict";var e,t,i=this&&this.__decorate||function(e,t,i,r){var l,n=arguments.length,c=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,i,r);else for(var o=e.length-1;o>=0;o--)(l=e[o])&&(c=(n<3?l(c):n>3?l(t,i,c):l(t,i))||c);return n>3&&c&&Object.defineProperty(t,i,c),c},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))(function(l,n){function c(e){try{s(r.next(e))}catch(t){n(t)}}function o(e){try{s(r.throw(e))}catch(t){n(t)}}function s(e){e.done?l(e.value):new i(function(t){t(e.value)}).then(c,o)}s((r=r.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const n=require("@rxdi/core"),c=require("@gapi/core"),o=require("./types/file.type"),s=require("./services/file.service"),a=require("../../services/file/file.service"),p=require("./types/file-raw.type"),u=require("../../services");let f=class{constructor(e,t){this.fileServiceInternal=e,this.fileService=t}listFiles(e,{folder:t}){return l(this,void 0,void 0,function*(){let e;return u.includes("--enable-full-folder-access")?e=t:(t=t.replace(".",""),e=process.cwd()+t),{paths:yield this.fileServiceInternal.listFolder(e)}})}readFile(e,{folder:t}){return l(this,void 0,void 0,function*(){let e;u.includes("--enable-full-folder-access")?e=t:(t=t.replace(".",""),e=process.cwd()+t);const i=e.split(".").pop(),r="jpg"===i||"jpeg"===i||"png"===i;let l=yield this.fileService.readFile(e);r&&(l=`data:image/${i};base64, ${l=(yield this.fileService.readFileRaw(e)).toString("base64")}`);let n=null;try{n=yield this.fileService.readFile(e.substring(0,e.lastIndexOf("/"))+"/reactive.json")}catch(c){}return{package:n,file:l}})}saveFile(e,{folder:t,content:i}){return l(this,void 0,void 0,function*(){let e;return u.includes("--enable-full-folder-access")?e=t:(t=t.replace(".",""),e=process.cwd()+t),yield this.fileService.writeFile(e,i),{file:yield this.fileService.readFile(e)}})}};i([c.Type(o.FileType),c.Query({folder:{type:c.GraphQLString}}),r("design:type",Function),r("design:paramtypes",[Object,Object]),r("design:returntype",Promise)],f.prototype,"listFiles",null),i([c.Type(p.FileRawType),c.Query({folder:{type:new c.GraphQLNonNull(c.GraphQLString)}}),r("design:type",Function),r("design:paramtypes",[Object,Object]),r("design:returntype",Promise)],f.prototype,"readFile",null),i([c.Type(p.FileRawType),c.Query({folder:{type:new c.GraphQLNonNull(c.GraphQLString)},content:{type:new c.GraphQLNonNull(c.GraphQLString)}}),r("design:type",Function),r("design:paramtypes",[Object,Object]),r("design:returntype",Promise)],f.prototype,"saveFile",null),f=i([n.Controller(),r("design:paramtypes",["function"==typeof(e=void 0!==s.FileService&&s.FileService)?e:Object,"function"==typeof(t=void 0!==a.FileService&&a.FileService)?t:Object])],f),exports.FileController=f;
},{"./types/file.type":"app/server/file/types/file.type.ts","./services/file.service":"app/server/file/services/file.service.ts","../../services/file/file.service":"app/services/file/file.service.ts","./types/file-raw.type":"app/server/file/types/file-raw.type.ts","../../services":"app/services/index.ts"}],"app/server/file/file.module.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,r,t,o){var l,c=arguments.length,i=c<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,r,t,o);else for(var s=e.length-1;s>=0;s--)(l=e[s])&&(i=(c<3?l(i):c>3?l(r,t,i):l(r,t))||i);return c>3&&i&&Object.defineProperty(r,t,i),i};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("@rxdi/core"),t=require("./services/file.service"),o=require("./file.controller");let l=class{};l=e([r.Module({services:[t.FileService],controllers:[o.FileController]})],l),exports.FileModule=l;
},{"./services/file.service":"app/server/file/services/file.service.ts","./file.controller":"app/server/file/file.controller.ts"}],"app/server/server.module.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,r,i,o){var s,t=arguments.length,l=t<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,r,i,o);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(l=(t<3?s(l):t>3?s(r,i,l):s(r,i))||l);return t>3&&l&&Object.defineProperty(r,i,l),l};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("@rxdi/core"),i=require("./services/webui.service"),o=require("./services/server-push.service"),s=require("./user/user-queries.controller"),t=require("./history/history.module"),l=require("./services/compile.service"),u=require("./namespace/namespace.module"),c=require("./build/build.module"),d=require("./file/file.module");let n=class{};n=e([r.Module({imports:[t.HistoryModule,u.NamespaceModule,c.BuildModule,d.FileModule],services:[i.WebUiService,o.ServerPushService,l.CompileService],controllers:[s.UserQueriesController]})],n),exports.ServerModule=n;
},{"./services/webui.service":"app/server/services/webui.service.ts","./services/server-push.service":"app/server/services/server-push.service.ts","./user/user-queries.controller":"app/server/user/user-queries.controller.ts","./history/history.module":"app/server/history/history.module.ts","./services/compile.service":"app/server/services/compile.service.ts","./namespace/namespace.module":"app/server/namespace/namespace.module.ts","./build/build.module":"app/server/build/build.module.ts","./file/file.module":"app/server/file/file.module.ts"}],"app/app.module.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,r,i,s){var t,c=arguments.length,o=c<3?r:null===s?s=Object.getOwnPropertyDescriptor(r,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,r,i,s);else for(var l=e.length-1;l>=0;l--)(t=e[l])&&(o=(c<3?t(o):c>3?t(r,i,o):t(r,i))||o);return c>3&&o&&Object.defineProperty(r,i,o),o};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("@rxdi/core"),i=require("@gapi/ipfs"),s=require("@gapi/ipfs-daemon"),t=require("./services/ipfs-file/ipfs-file.service"),c=require("./services/file/file.service"),o=require("./services/parcel-bundler/parcel-bundler.service"),l=require("./services/file/file-user.service"),p=require("./services/dts-generator/dts-generator.service"),u=require("./services/tsconfig-generator/tsconfig-generator.service"),v=require("./services/table-service/table-service"),n=require("./status/status.module"),a=require("./services/build-history/build-history.service"),f=require("./services/error-reason/error-reason.service"),d=require("./plugins/compile/compile.plugin"),g=require("./services/time/time.service"),S=require("./services"),P=require("./server/server.module"),q=[s.IpfsDaemonModule.forRoot({type:S.nextOrDefault("--default-ipfs-node","go"),config:{Addresses:{API:process.env.IPFS_API_PORT?process.env.IPFS_API_PORT:S.nextOrDefault("--ipfs-api-port","/ip4/0.0.0.0/tcp/5002",e=>`/ip4/0.0.0.0/tcp/${e}`),Gateway:process.env.IPFS_API_GATEWAY?process.env.IPFS_API_GATEWAY:S.nextOrDefault("--ipfs-api-gateway","/ip4/0.0.0.0/tcp/8081",e=>`/ip4/0.0.0.0/tcp/${e}`),Swarm:S.nextOrDefault("--ipfs-swarms",["/ip4/0.0.0.0/tcp/4001","/ip6/::/tcp/4001"],e=>e.split(","))}}}),i.IpfsModule.forRoot(),n.StatusModule];S.includes("--webui")&&q.push(P.ServerModule);let m=class{};m=e([r.Module({imports:q,services:[t.FileIpfsService,c.FileService,o.ParcelBundlerService,l.FileUserService,p.TypescriptDefinitionGeneratorService,u.TsConfigGenratorService,v.TableService,a.BuildHistoryService,f.ErrorReasonService,g.TimeService,S.HtmlTemplateBuilder,S.PackageJsonService,S.PreviousService,S.LoggerService],plugins:[d.CompilePlugin]})],m),exports.AppModule=m;
},{"./services/ipfs-file/ipfs-file.service":"app/services/ipfs-file/ipfs-file.service.ts","./services/file/file.service":"app/services/file/file.service.ts","./services/parcel-bundler/parcel-bundler.service":"app/services/parcel-bundler/parcel-bundler.service.ts","./services/file/file-user.service":"app/services/file/file-user.service.ts","./services/dts-generator/dts-generator.service":"app/services/dts-generator/dts-generator.service.ts","./services/tsconfig-generator/tsconfig-generator.service":"app/services/tsconfig-generator/tsconfig-generator.service.ts","./services/table-service/table-service":"app/services/table-service/table-service.ts","./status/status.module":"app/status/status.module.ts","./services/build-history/build-history.service":"app/services/build-history/build-history.service.ts","./services/error-reason/error-reason.service":"app/services/error-reason/error-reason.service.ts","./plugins/compile/compile.plugin":"app/plugins/compile/compile.plugin.ts","./services/time/time.service":"app/services/time/time.service.ts","./services":"app/services/index.ts","./server/server.module":"app/server/server.module.ts"}],"gapi-framework-imports.ts":[function(require,module,exports) {
"use strict";var e,r=this&&this.__decorate||function(e,r,t,o){var n,a=arguments.length,s=a<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,r,t,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(a<3?n(s):a>3?n(r,t,s):n(r,t))||s);return a>3&&s&&Object.defineProperty(r,t,s),s};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("@gapi/core"),o=require("./app/services/helpers/helpers");let n=e=class{static forRoot(r){let n=[];return r&&(n=[t.CoreModule.forRoot({server:{randomPort:!process.env.RANDOM_PORT&&o.nextOrDefault("--random-port",!1,Boolean),hapi:{port:process.env.API_PORT?process.env.API_PORT:o.nextOrDefault("--graphql-api-port",9300,Number),routes:{cors:{origin:["*"],additionalHeaders:["Host","User-Agent","Accept","Accept-Language","Accept-Encoding","Access-Control-Request-Method","Access-Control-Allow-Origin","Access-Control-Request-Headers","Origin","Connection","Pragma","Cache-Control"]}}}},graphql:{path:o.nextOrDefault("--graphql-endpoint","/graphql"),openBrowser:o.includes("--open-browser-graphiql"),watcherPort:o.nextOrDefault("--open-browser-graphiql",8967),writeEffects:o.includes("--write-effects"),graphiql:o.includes("--graphiql"),graphiQlPlayground:o.includes("--graphiql-playground"),graphiQlPath:o.nextOrDefault("--graphiql-endpoint","/graphiql"),graphiqlOptions:{endpointURL:o.nextOrDefault("--graphql-endpoint","/graphql"),passHeader:`'Authorization':'${o.nextOrDefault("--graphiql-auth-token","")}'`,subscriptionsEndpoint:o.nextOrDefault("--graphiql-subscription-endpoint","ws://localhost:9300/subscriptions"),websocketConnectionParams:{token:o.nextOrDefault("--graphiql-auth-token","")}},graphqlOptions:{schema:null}}})]),{module:e,frameworkImports:n}}};n=e=r([t.Module()],n),exports.GapiFrameworkImports=n;
},{"./app/services/helpers/helpers":"app/services/helpers/helpers.ts"}],"app/server/index.ts":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./server.module"));
},{"./server.module":"app/server/server.module.ts"}],"app/index.ts":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./app.module")),e(require("./services/index")),e(require("./server/index"));
},{"./app.module":"app/app.module.ts","./services/index":"app/services/index.ts","./server/index":"app/server/index.ts"}],"main.ts":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0});const r=require("./check-arguments"),o=require("@rxdi/core"),i=require("./commands-description"),n=require("./app/services/helpers/helpers"),s=require("./app/services/logger/logger.service"),t=require("terminal-table"),c=console.log;if(console.log=function(...e){return o.Container.get(s.LoggerService).stdout.next(e.toString()),c(...e)},n.includes("--silent")&&(console.log=(()=>null)),n.includes("--help")){const e=new t({borderStyle:2,horizontalLine:!0,width:["20%","80%"],leftPadding:1});e.push(["Command","Description"]),e.push(["Available arguments are:"]),Object.keys(i.CommandDescription).forEach(r=>e.push([r,i.CommandDescription[r]])),e.attrRange({row:[0,1]},{align:"center",color:"green",bg:"black"}),console.log(""+e),process.exit(0)}r.checkArguments();const l=require("./environment-setter.module"),a=require("./app/app.module"),u=require("./gapi-framework-imports");o.Container.get(o.ConfigService).setConfig(Object.assign({},process.argv.toString().includes("-v")||process.argv.toString().includes("--verbose")?{logger:{logging:!0,hashes:!1,date:!0,exitHandler:!0,fileService:!0}}:{},{init:!1,initOptions:{services:!0,plugins:!0,controllers:!0}}));const p=[l.EnvironemntSetterModule,u.GapiFrameworkImports.forRoot(n.includes("--webui")||n.includes("--graphql-server-only"))];o.BootstrapFramework(a.AppModule,p).subscribe(()=>{console.log("Started! Use --open-browser argument! Enjoy! :)")},e=>{throw new Error(e)}),e(require("./app/index")),e(require("./gapi-framework-imports")),e(require("./env.injection.tokens")),e(require("./commands")),e(require("./check-arguments")),e(require("./commands-description"));
},{"./check-arguments":"check-arguments.ts","./commands-description":"commands-description.ts","./app/services/helpers/helpers":"app/services/helpers/helpers.ts","./app/services/logger/logger.service":"app/services/logger/logger.service.ts","./environment-setter.module":"environment-setter.module.ts","./app/app.module":"app/app.module.ts","./gapi-framework-imports":"gapi-framework-imports.ts","./app/index":"app/index.ts","./env.injection.tokens":"env.injection.tokens.ts","./commands":"commands.ts"}]},{},["main.ts"], null)
//# sourceMappingURL=/main.js.map